# Статистика выполнения запросов и её анализ

При выполнении запроса {{ ydb-short-name }} собирает статистику выполнения, которая помогает исследовать план выполнения запроса, находить узкие места и, а также ускорять их, устраняя проблемы и выбирая более оптимальные решения, что особенно важно для аналитическим (OLAP) запросов. Эти данные вместе с планом выполнения запроса доступны в формате JSON, который, однако, с трудом поддаётся анализу. Для упрощения понимания поведения запроса возможна его визуализация в графическом формате SVG. В данном разделе содержится информация о данном представлении.

В качестве примера в данном разделе будет использоваться набор данных от промышленного бенчмарка TPC-H scale 100. Описание структуры таблиц и связей между ними вы можете найти в спецификации данного стандарта. Однако запросы к этим данным оригинальные, они не соответствуют стандарту и были подобраны специальным образом для иллюстрации материала. Поэтому текст каждого запроса будет явно приведён рядом с его планом выполнения.

Так как целевой аудиторией данного раздела являются аналитические запросы, то основное материал будет использовать колоночный формат таблиц хранения данных. Особенности анализа поведения федеративных запросов к внешним источникам данных, а также особенности выполнения запросов к строковыа таблицам описаны в соответствующих разделах.

Формат графического представления был специально спроектирован таким образом, чтобы акцентировать внимание на наиболее нужных и полезных элементах. При этом опытный разработчик сможет получить из него больше информации, обращая внимание на дополнительные элементы и из свойства. Сложные концепции поясняются в данном разделе с символом ???.

Для лучшего понимания материала в разделе иногда встречаются контрольные вопросы. Они по умолчанию показываются в свёрнутом виде, чтобы не занимать полезное место и не отвлекать внимание при повторном просмотре. Однако, при первом знакомстве с документацией мы рекомедуем вам развернуть их, подумать над изложенной проблемой и только после того, как вы сформулировали собственную версию ознакомиться с ответом. Такие несложные упражнения помогут вам гораздо быстрее и точнее понять объясняемый материал и быстрее повысить собственное мастерство чтения планов выполнения.

- [Как получить графическое представление плана](how-to-get.md)
    - [UI](how-to-get.md#ui)
    - [ydb cli](how-to-get.md#cli)
    - [ydb_int](how-to-get.md#ydb_int)
    - [kqprun](how-to-get.md#kqprun)
- [Структура плана запроса](structure.md)
    - [Стадии](structure.md#stages)
    - [Каналы связи](structure.md#connections)
    - [Объединение](structure.md#join)
    - [Множественные выходы](structure.md#multiout)
    - [Составные графы](structure.md#complex)
- [Визуализация метрик](metrics.md)
    - Параллельность
    - Агрегаты
    - Data Skew
    - Time Skew
- [Типовые проблемы и способы их решения](troubleshooting.md)
    - Локализация проблемной стадии
    - Недостаточная производительность колоночных таблиц
    - Низкий уровень параллельности вычислительных задач
    - Неравномерность загрузки задач внутри стадии
    - Неоптимальный план вычислений
- [Федеративные аналитические запросы](federative.md)
    - Получение данных из внешнего источника
    - Выгрузка данных во внешний источник
    - Обработка данных из нескольких источников
- [Особенности анализа строчных таблиц](datashards.md)
    - Lookup Join и Stream Lookup Join